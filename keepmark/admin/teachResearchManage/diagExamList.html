<div class="wrapper-md" ng-controller="DiagListController">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h4>诊断单科试卷
            <button type="button" class="pull-right btn btn-primary" ui-sref='app.teachResearchManage.createSingle'>创建单科诊断试卷</button></h4>
        </div>
        <div class="row wrapper">
            <div class="panel-heading  pull-right">
               
                <!-- <button type="button" class="btn btn-primary" ui-sref='app.teachResearchManage.createDouble'>组织全科诊断试卷</button> -->
            </div>
            <div class="row panel-body">
                <!-- <h4>负责监考教师:{{session_user.username}}</h4> -->
               <!--  <div ng-controller="dataController" ng-repeat="x in data">
               <div id="{{x.id}}">
               <img ng-src="{{x.name}}" />
               </div>
               </div> -->
                <table class="table" >
                    <tr>
                        <td width="8%" align="right">学年：</td>
                        <td ng-model="gradeCode">高考</td>
                    </tr>
                    <tr>
                        <td align="right">类型：</td>
                        <td>
                            <div>
                                <select class="form-control" ng-model="diagnosisType" ng-options="obj.name for obj in subjects"  ng-value='{{obj.id}}' ng-init="diagnosisType">
                                    <option value="">请选择类型</option> 
                                </select>
                                <!-- <select ng-model="selectedGenre">
                                    <option ng-repeat="label in subjects[selectedPerson.id].category">
                                    {{label.name}}</option>
                                    </select>  -->
                                <div class="line line-solid b-b line-lg"></div>
                                <span class="col-sm-2" style="width:76px;">学科：</span>
                                <ul ng-model="selectedGenre">
                                    <li ng-repeat="label in subjects[diagnosisType.id].category" style="float:left;">
                                        <label class="i-checks">
                                            <input type="radio" name="e" value="option2" ng-checked='{{label.checked}}' >
                                            <i></i>
                                           <!--  ng-model='subjectCode' -->
                                            {{label.name}}
                                        </label>
                                    </li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td align="right">试卷用途：</td>
                        <td>
                            <label class="i-checks" ng-repeat="obj in paperUser">
                                <input type="radio" name="c" value="{{obj.id}}" ng-checked="{{obj.checked}}" ng-model='paperType'>
                                <i></i>{{obj.name}}
                            </label>
                        </td>
                    </tr>
                    <tr>
                        <td align="right">教材：</td>
                        <td>
                            <label class="i-checks" ng-repeat="obj in teachMaterial">
                                <input type="radio" name="diaga" value="{{obj.id}}" ng-checked="{{obj.checked}}" ng-model='bookVersionCode'>
                                <i></i>{{obj.name}}
                            </label>
                            <button ng-click="search()" class="pull-right btn btn-primary">&nbsp;查&nbsp;&nbsp;询&nbsp;</button>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                    </tr>
                </table>
            </div>
            <!-- ng-if="data.total_count>0" -->
            <div class="table-responsive">
                <table class="table table-striped b-t b-light">
                    <thead>
                        <tr>
                            <th>序号</th>
                            <th>学科</th>
                            <th>创建时间</th>
                            <th>创建人</th>
                            <th>封面</th>
                            <th>状态</th>
                            <th>操作</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- <tr ng-repeat="data in data.results">
                            <td>
                                <label class="i-checks m-b-none">
                                    <input type="checkbox" ng-model="data.selected"><i></i></label>
                            </td>
                            <td>{{data.title}}</td>
                            <td>{{data.create_time|date:'yyyy-MM-dd HH:mm:ss Z'}}</td>
                            <td>
                                <a ui-sref="app.news.detail({id:data.id})" class="active"><i class="fa fa-edit"></i></a>
                            </td>
                        </tr> -->
                        <tr ng-repeat="data in data.paperDatas">
                            <td>{{data.id}}</td>
                            <td>{{data.subjectCode }}</td>
                            <td>{{data.createDateStr}}</td>
                            <td>{{data.createName}}</td>
                            <td><img src="{{data.coverUrl}}" width="200px" height="100px" /></td>
                            <td>可以使用</td>
                            <td>
                                <button class="btn btn-primary btn-sm" ui-sref="app.teachResearchManage.createSingle({id:data.id})">编&nbsp;&nbsp;辑</button>
                            </td>
                            <td>
                                <button type="button" class="btn btn-primary btn-sm" ui-sref='app.teachResearchManage.detail'>详&nbsp;&nbsp;情</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <footer class="panel-footer">
                <div class="row">
                    <div class="col-sm-8 text-left">
                        <small class="text-muted inline m-t-sm m-b-sm">{{data.total_count}}条记录</small>
                    </div>
                    <div ng-if="data.page_count>1" class="col-sm-4 text-right text-center-xs">
                        <ul class="pagination pagination-sm m-t-none m-b-none">
                            <li ng-class="{disabled:!data.previous}"><a ui-sref="app.news.list({page:data.page_index-1,search:search_context})"><i class="fa fa-chevron-left"></i></a></li>
                            <li ng-repeat="page in data.pages" ng-class="{active:page==data.page_index}"><a ui-sref="app.news.list({page:page,search:search_context})">{{page}}</a></li>
                            <li ng-class="{disabled:!data.next}"><a ui-sref="app.news.list({page:data.page_index+1,search:search_context})"><i class="fa fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                </div>
            </footer>
        </div>
    </div>
</div>
